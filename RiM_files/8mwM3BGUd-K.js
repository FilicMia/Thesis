if (self.CavalryLogger) { CavalryLogger.start_js(["2WhgH"]); }

__d("CameraPostDirectMarkSeenMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1464562780232002";};j.getQueryID=function(){"use strict";return "635674183299513";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('CameraPostLoggingEvents',[],(function a(b,c,d,e,f,g){'use strict';f.exports={SEND_REPLY_ATTEMPT:'sendReplyMutationAttempt',SEND_REPLY_SUCCESS:'sendReplyMutationSuccess',SEND_REPLY_FAIL:'sendReplyMutationFail',THREAD_VIEWED:'view',THREAD_MARK_SEEN_ATTEMPT:'markSeenMutationAttempt',THREAD_MARK_SEEN_SUCCESS:'markSeenMutationSuccess',THREAD_MARK_SEEN_FAIL:'markSeenMutationFail',DIRECT_VIEWER_CLICKOUT:'clickout',STORIES_VIEWER_CLICKOUT:'stories_clickout',BUCKET_CHANGED:'bucketChanged',BUCKET_SELECTED_FROM_TRAY:'bucketSelectedFromTray',PAUSE_TOGGLE_ON:'pauseToggleOn',PAUSE_TOGGLE_OFF:'pauseToggleOff',AUTO_PROGRESSION:'autoProgression'};}),null);
__d("CameraPostQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1461834067210851";};j.getQueryID=function(){"use strict";return "833791703442625";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("CameraPostRepliesQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1225697970891964";};j.getQueryID=function(){"use strict";return "1018391138296424";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("CameraPostReplyMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1307876075956970";};j.getQueryID=function(){"use strict";return "473441429653987";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d("CameraPostUserQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1652248708148952";};j.getQueryID=function(){"use strict";return "143159039576179";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('CameraPostWWWTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],(function a(b,c,d,e,f,g){'use strict';function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:CameraPostWWWLoggerConfig',this.$CameraPostWWWTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:CameraPostWWWLoggerConfig',this.$CameraPostWWWTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$CameraPostWWWTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$CameraPostWWWTypedLogger1=babelHelpers['extends']({},this.$CameraPostWWWTypedLogger1,j);return this;};h.prototype.setCameraPostType=function(j){this.$CameraPostWWWTypedLogger1.camera_post_type=j;return this;};h.prototype.setEventDetails=function(j){this.$CameraPostWWWTypedLogger1.event_details=j;return this;};h.prototype.setEventType=function(j){this.$CameraPostWWWTypedLogger1.event_type=j;return this;};h.prototype.setThreadID=function(j){this.$CameraPostWWWTypedLogger1.thread_id=j;return this;};h.prototype.setViewerID=function(j){this.$CameraPostWWWTypedLogger1.viewer_id=j;return this;};h.prototype.setWebSurface=function(j){this.$CameraPostWWWTypedLogger1.web_surface=j;return this;};var i={camera_post_type:true,event_details:true,event_type:true,thread_id:true,viewer_id:true,web_surface:true};f.exports=h;}),null);
__d('CameraPostGraphQLAPI',['WebGraphQL','CameraPostReplyMutationWebGraphQLMutation','CameraPostDirectMarkSeenMutationWebGraphQLMutation','CameraPostQueryWebGraphQLQuery','CameraPostRepliesQueryWebGraphQLQuery','CameraPostUserQueryWebGraphQLQuery','CameraPostWWWTypedLogger','CameraPostLoggingEvents','idx','uniqueID'],(function a(b,c,d,e,f,g){'use strict';f.exports={sendDirectReply:function h(i,j,k,l){var m=c('uniqueID')(),n={client_mutation_id:m,actor_id:i,thread_id:j,message:k},o=k.length;new (c('CameraPostWWWTypedLogger'))().setCameraPostType(l).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').SEND_REPLY_ATTEMPT).setEventDetails(o).setViewerID(i).setThreadID(j).log();return c('WebGraphQL').exec(new (c('CameraPostReplyMutationWebGraphQLMutation'))({input:n})).then(function(p){new (c('CameraPostWWWTypedLogger'))().setCameraPostType(l).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').SEND_REPLY_SUCCESS).setEventDetails(o).setViewerID(i).setThreadID(j).log();return p;},function(p){new (c('CameraPostWWWTypedLogger'))().setCameraPostType(l).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').SEND_REPLY_FAIL).setEventDetails(o).setViewerID(i).setThreadID(j).log();return p;});},loadThreadFullInformation:function h(i,j){return c('WebGraphQL').exec(new (c('CameraPostQueryWebGraphQLQuery'))({thread_id:j})).then(function(k){var l,m,n=(l=k)!=null?(l=l.node)!=null?l.camera_post_type:l:l,o=(m=k)!=null?(m=m.node)!=null?m.viewer_replays_left:m:m;new (c('CameraPostWWWTypedLogger'))().setCameraPostType(n).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').THREAD_VIEWED).setEventDetails(o).setViewerID(i).setThreadID(j).log();return k;},function(k){return k;});},loadUserInfo:function h(){return c('WebGraphQL').exec(new (c('CameraPostUserQueryWebGraphQLQuery'))());},loadRepliesForThread:function h(i){return c('WebGraphQL').exec(new (c('CameraPostRepliesQueryWebGraphQLQuery'))({thread_id:i}));},markThreadSeen:function h(i,j,k,l,m){var n={client_mutation_id:c('uniqueID')(),actor_id:i,thread_id:j,last_message_seen_id:k};new (c('CameraPostWWWTypedLogger'))().setCameraPostType(l).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').THREAD_MARK_SEEN_ATTEMPT).setEventDetails(m).setViewerID(i).setThreadID(j).log();return c('WebGraphQL').exec(new (c('CameraPostDirectMarkSeenMutationWebGraphQLMutation'))({input:n})).then(function(o){new (c('CameraPostWWWTypedLogger'))().setCameraPostType(l).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').THREAD_MARK_SEEN_SUCCESS).setEventDetails(m).setViewerID(i).setThreadID(j).log();return o;},function(o){new (c('CameraPostWWWTypedLogger'))().setCameraPostType(l).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').THREAD_MARK_SEEN_FAIL).setEventDetails(m).setViewerID(i).setThreadID(j).log();return o;});}};}),null);
__d('FBStoriesTimer',['EventEmitter'],(function a(b,c,d,e,f,g){'use strict';var h,i,j=30;h=babelHelpers.inherits(k,c('EventEmitter'));i=h&&h.prototype;function k(l){i.constructor.call(this);var m=l.duration,n=l.start,o=l.end;this.$FBStoriesTimer1=m;this.$FBStoriesTimer2=n!=undefined?n:0;this.$FBStoriesTimer3=o!=undefined?o:100;this.$FBStoriesTimer4=0;this.$FBStoriesTimer5=false;this.$FBStoriesTimer7=this.$FBStoriesTimer7.bind(this);}k.prototype.play=function(){this.$FBStoriesTimer7();};k.prototype.$FBStoriesTimer7=function(){this.$FBStoriesTimer4+=j;var l=Math.min(this.$FBStoriesTimer3,(this.$FBStoriesTimer3-this.$FBStoriesTimer2)/this.$FBStoriesTimer1*this.$FBStoriesTimer4);this.emit('tick',l);if(l>=this.$FBStoriesTimer3){this.emit('done');if(this.$FBStoriesTimer6)clearTimeout(this.$FBStoriesTimer6);}else{var m=this.$FBStoriesTimer8(),n=m<j?m:j;this.$FBStoriesTimer6=setTimeout(this.$FBStoriesTimer7,n);}};k.prototype.pause=function(){clearTimeout(this.$FBStoriesTimer6);};k.prototype.stop=function(){this.pause();};k.prototype.$FBStoriesTimer8=function(){return this.$FBStoriesTimer1-this.$FBStoriesTimer4;};k.prototype.onTick=function(l){return this.addListener('tick',function(m){return l(m,this.$FBStoriesTimer8());}.bind(this));};k.prototype.onDone=function(l){return this.addListener('done',l);};f.exports=k;}),null);
__d('Video.react',['React','ReactDOM'],(function a(b,c,d,e,f,g){var h,i,j=c('React').PropTypes;h=babelHelpers.inherits(k,c('React').Component);i=h&&h.prototype;k.prototype.componentDidMount=function(){'use strict';var l=c('ReactDOM').findDOMNode(this.refs.video);if(this.props.paused&&l&&l.pause)l.pause();};k.prototype.componentWillUpdate=function(l,m){'use strict';var n=c('ReactDOM').findDOMNode(this.refs.video);if(l.playbackRate)n.playbackRate=l.playbackRate;if(l.paused!=this.props.paused&&n)if(l.paused&&n.pause){n.pause();}else if(n.play)n.play();};k.prototype.render=function(){'use strict';return c('React').createElement('video',babelHelpers['extends']({},this.props,{ref:'video'}));};function k(){'use strict';h.apply(this,arguments);}k.propTypes={autoPlay:j.bool,paused:j.bool,controls:j.bool,height:j.oneOfType([j.string,j.number]),loop:j.bool,muted:j.bool,onAbort:j.func,onCanPlay:j.func,onCanPlayThrough:j.func,onDurationChange:j.func,onEmptied:j.func,onEncrypted:j.func,onEnded:j.func,onError:j.func,onLoadedData:j.func,onLoadedMetadata:j.func,onLoadStart:j.func,onPause:j.func,onPlay:j.func,onPlaying:j.func,onProgress:j.func,onRateChange:j.func,onSeeked:j.func,onSeeking:j.func,onStalled:j.func,onSuspend:j.func,onTimeUpdate:j.func,onVolumeChange:j.func,onWaiting:j.func,playbackRate:j.number,poster:j.string,src:j.string.isRequired,width:j.oneOfType([j.string,j.number])};f.exports=k;}),null);
__d('CameraPostMedia.react',['cx','FBStoriesTimer','React','ReactCSSTransitionGroup','idx','Image.react','Video.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k={enter:"_3dep",enterActive:"_3deq",leave:"_3der",leaveActive:"_3deu"},l=3500;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;function m(n){j.constructor.call(this,n);this.$CameraPostMedia4=function(o){var p,q=(p=o)!=null?(p=p.nativeEvent)!=null?p.srcElement:p:p;if(q){var r=q.currentTime,s=q.duration,t=Math.min(s&&r?r/s*100:0,100);if(this.props.onTimeUpdate){var u=q.duration-q.currentTime;this.props.onTimeUpdate(t,u);}}}.bind(this);this.$CameraPostMedia5=function(o,p){if(this.props.onTimeUpdate)this.props.onTimeUpdate(o,p);}.bind(this);}m.prototype.componentDidMount=function(){if(!this.$CameraPostMedia2())this.$CameraPostMedia3();};m.prototype.componentWillUpdate=function(n){if(n.paused!=this.props.paused&&!this.$CameraPostMedia2())if(n.paused){this.$CameraPostMedia1.pause();}else this.$CameraPostMedia1.play();};m.prototype.render=function(){var n,o,p,q=this.props,r=q.media,s=q.paused,t=q.showOverlay,u=((n=r)!=null?(n=n.image)!=null?n.width:n:n)||0,v=((o=r)!=null?(o=o.image)!=null?o.height:o:o)||0,w=u>v,x=t?c('React').createElement(c('ReactCSSTransitionGroup'),{transitionName:k,transitionEnterTimeout:200,transitionLeaveTimeout:200},c('React').createElement('div',{className:"_3dew"})):null,y=s?c('React').createElement(c('ReactCSSTransitionGroup'),{transitionName:k,transitionEnterTimeout:200,transitionLeaveTimeout:200},c('React').createElement('div',{className:"_ida"},c('React').createElement('span',{className:"_idd"},'||'))):null;if(r==null)return null;if(this.$CameraPostMedia2()){var z;return c('React').createElement('div',{className:"_ide",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown},x,y,c('React').createElement(c('Video.react'),{onTimeUpdate:this.$CameraPostMedia4,onEnded:this.props.onDone,src:(z=r)!=null?z.playable_url:z,autoPlay:true,loop:false,paused:s,className:"_1s5n"+(w?' '+"landscape":'')}));}return c('React').createElement('div',{className:"_ide",onMouseUp:this.props.onMouseUp,onMouseDown:this.props.onMouseDown},x,y,c('React').createElement(c('Image.react'),{src:(p=r)!=null?(p=p.image)!=null?p.uri:p:p,className:"_1s5n"+(w?' '+"landscape":'')}));};m.prototype.$CameraPostMedia2=function(n){var o;n=n||this.props;return ((o=n.media)!=null?o.is_playable:o)||false;};m.prototype.$CameraPostMedia3=function(){if(!this.props.onDone||!this.props.onTimeUpdate)return;this.$CameraPostMedia1=new (c('FBStoriesTimer'))({duration:l});this.$CameraPostMedia1.onTick(this.$CameraPostMedia5);if(this.props.onDone)this.$CameraPostMedia1.onDone(this.props.onDone);if(!this.props.paused)this.$CameraPostMedia1.play();};m.prototype.componentWillUnmount=function(){if(this.$CameraPostMedia1){this.$CameraPostMedia1.stop();delete this.$CameraPostMedia1;}};m.defaultProps={media:{},showOverlay:false,onTimeUpdate:function n(o,p){},onDone:function n(){},onMouseUp:function n(){},onMouseDown:function n(){},paused:false};f.exports=m;}),null);
__d('CameraPostOwnerInfo.react',['cx','React','formatDate','Timestamp.react','Tooltip.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function p(q,r,s){var t=[];r.forEach(function(u){t.push(u[s]);});return t;},j=function p(q,r,s){var t=[];r.forEach(function(u){if(u.id!==q)t.push(u[s]);});return t;},k=function p(q,r,s){var t=i(q,r,s);return t.join(', ');},l=function p(q,r,s){var t=j(q,r,s),u=t.reduce(function(v,w){if(v.showingNames==='')return {showingNames:w,others:v.others};if((v.showingNames+', '+w).length<20)return {showingNames:v.showingNames+', '+w,others:v.others};return {showingNames:v.showingNames,others:v.others+1};},{showingNames:'',others:0});if(u.others>0)return u.showingNames+' and '+u.others+' others.';return u.showingNames;},m=function p(q,r,s,t){if(s!==''&&s!==null)return s;return l(q,r,t);},n=function p(q,r,s){var t=k(q,r,s);return c('React').createElement('div',null,c('React').createElement('p',{className:"_3gpm"},'Group Members'),c('React').createElement('p',{className:"_3gpn"},t));},o=function p(q){var r=q.id,s=q.name,t=q.time,u=q.cameraPostType,v=q.participants,w=q.groupName,x=function z(){if(u==='GROUP_DIRECT'){return c('React').createElement('p',{className:"_2in7"},s,c('React').createElement('span',{className:"_3gpo"},'\u00A0to\u00A0'),c('React').createElement(c('Tooltip.react'),{tooltip:n(r,v,'name'),position:'below'},m(r,v,w,'short_name')));}else return c('React').createElement('p',{className:"_2in7"},s);},y=c('React').createElement(c('Timestamp.react'),{autoUpdate:true,time:t,text:c('formatDate')(t,'M j, Y',{utc:true}),className:"_2in8"});return c('React').createElement('div',{className:"_116t"},x(),y);};f.exports=o;}),null);
__d('CameraPostOwnerPic.react',['cx','React','Image.react','Tooltip.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.profile_picture,m=k.name;return c('React').createElement(c('Tooltip.react'),{tooltip:m,position:'left'},c('React').createElement(c('Image.react'),{src:l.uri,className:"_116u"}));};f.exports=i;}),null);
__d('CameraPostOwnerView.react',['cx','React','CameraPostOwnerPic.react','CameraPostOwnerInfo.react'],(function a(b,c,d,e,f,g,h){'use strict';var i=function j(k){var l=k.owner,m=k.time,n=k.cameraPostType,o=k.participants,p=k.groupName,q=l.id,r=l.name,s=l.profile_picture;return c('React').createElement('div',{className:"_116v"},c('React').createElement(c('CameraPostOwnerPic.react'),{profile_picture:s,name:r}),c('React').createElement(c('CameraPostOwnerInfo.react'),{id:q,name:r,time:m,cameraPostType:n,participants:o||[],groupName:p||''}));};f.exports=i;}),null);
__d('CameraPostReportButton.react',['ix','cx','fbt','AsyncDialog','AsyncRequest','NFXStoryLocation','React','fbglyph','Image.react','PopoverMenu.react','ReactMenu','ReactXUIMenu'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k=c('ReactMenu').Item,l='/ajax/nfx/start_dialog',m='/ajax/bugs/report',n='342047509524458',o=function p(q){var r=function u(){c('AsyncDialog').send(new (c('AsyncRequest'))().setData({reportable_ent_token:q.threadID.toString(),story_location:c('NFXStoryLocation').DIRECT_MESSAGING}).setURI(l));},s=function u(){c('AsyncDialog').send(new (c('AsyncRequest'))().setData({product_category_id:n}).setURI(m));},t=c('React').createElement(c('ReactXUIMenu'),{onItemClick:q.onPopoverItemClick},q.contentReportFbt?c('React').createElement(k,{onClick:r},q.contentReportFbt):null,c('React').createElement(k,{onClick:s},j._("Something isn't working")));return c('React').createElement('div',{className:"_4q7o"},c('React').createElement(c('PopoverMenu.react'),{alignv:'bottom',alignh:'center',menu:t,position:'below',onItemClick:q.onPopoverItemClick,onShow:q.onPopoverShow,onHide:q.onPopoverHide},c('React').createElement('a',{href:'#'},c('React').createElement(c('Image.react'),{src:h("114186")}))));};f.exports=o;}),null);
__d('CameraPostSendReply.react',['cx','fbt','React','Image.react','Tooltip.react'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l=c('React').Component;j=babelHelpers.inherits(m,l);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.$CameraPostSendReply3=function(){if(this.props.onFocusInput)this.props.onFocusInput();}.bind(this);this.$CameraPostSendReply4=function(){if(this.props.onBlurInput)this.props.onBlurInput();}.bind(this);this.state={replyText:''};this.$CameraPostSendReply1=this.$CameraPostSendReply1.bind(this);this.$CameraPostSendReply2=this.$CameraPostSendReply2.bind(this);}m.prototype.$CameraPostSendReply1=function(event){this.setState({replyText:event.target.value});};m.prototype.$CameraPostSendReply2=function(event){if(event.key==='Enter'){this.props.onReplyEntered(this.state.replyText);this.setState({replyText:''});}};m.prototype.render=function(){return c('React').createElement('div',{className:"_2dvt"},c('React').createElement(c('Tooltip.react'),{tooltip:this.props.replyProfileName,alignH:'right',position:'below'},c('React').createElement('div',{className:"_2dv-"},c('React').createElement(c('Image.react'),{src:this.props.replyProfilePic,className:"_2dv_"}))),c('React').createElement('div',{className:"_2dw0"},c('React').createElement('input',{placeholder:i._("Napi\u0161ite odgovor..."),value:this.state.replyText,onChange:this.$CameraPostSendReply1,onFocus:this.$CameraPostSendReply3,onBlur:this.$CameraPostSendReply4,onKeyDown:this.$CameraPostSendReply2,onMouseUp:this.$CameraPostSendReply5})));};m.prototype.$CameraPostSendReply5=function(n){n.preventDefault();n.stopPropagation();};f.exports=m;}),null);
__d('FBStoriesActionTypes',[],(function a(b,c,d,e,f,g){var h={LOAD:'FB_STORIES.LOAD',LOADING:'FB_STORIES.LOADING',LOADED:'FB_STORIES.LOADED',LOADED_ERROR:'FB_STORIES.LOADED_ERROR',SELECTED_BUCKET_ID_CHANGED:'FB_STORIES.SELECTED_BUCKET_ID_CHANGED',SELECTED_THREAD_IDX_CHANGED:'FB_STORIES.SELECTED_THREAD_IDX_CHANGED',NEXT_BUCKET:'FB_STORIES.NEXT_BUCKET',PREV_BUCKET:'FB_STORIES.PREV_BUCKET',SUBSCRIPTION_BUCKET_UPDATE:'FB_STORIES.SUBSCRIPTION_BUCKET_UPDATE',UPDATE_THREAD_SEEN_OPTIMISTIC:'FB_STORIES.UPDATE_THREAD_SEEN_OPTIMISTIC'};f.exports=h;}),null);
__d("FBStoriesBucketsQueryWebGraphQLQuery",["WebGraphQLQueryBase"],(function a(b,c,d,e,f,g){'use strict';f.exports=function(){var h,i;h=babelHelpers.inherits(j,c("WebGraphQLQueryBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return "1429218053837701";};j.getQueryID=function(){"use strict";return "379787895751743";};function j(){"use strict";h.apply(this,arguments);}return j;}();}),null);
__d('FBStoriesDispatcher',['ExplicitRegistrationReactDispatcher'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('ExplicitRegistrationReactDispatcher'));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this);}f.exports=new j({strict:true});}),null);
__d('FBStoriesStore',['FBStoriesDispatcher','FBStoriesActionTypes','FluxReduceStore','idx','LoadObject'],(function a(b,c,d,e,f,g){'use strict';var h,i;h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {data:c('LoadObject').empty(),selectedBucketIndex:0,currentThreadIndex:0,allDone:false};};j.prototype.reduce=function(k,l){var m,n=this,o,p,q,r,s;switch(l.type){case c('FBStoriesActionTypes').LOADING:return babelHelpers['extends']({},k,{data:c('LoadObject').loading()});case c('FBStoriesActionTypes').LOADED:var t=l.data,u=((o=t)!=null?(o=o.me)!=null?(o=o.friends_stories_buckets)!=null?o.nodes:o:o:o)||[];u=u.reduce(function(aa,ba){var ca=this.$FBStoriesStore1(ba);if(ca&&ca.length>0){ba.threads.nodes=ca.reverse();aa.push(ba);}return aa;}.bind(this),[]);var v=((p=t)!=null?(p=p.me)!=null?(p=p.story_bucket)!=null?p.nodes:p:p:p)||[],w=v[0];if(w&&w.threads&&w.threads.nodes)w.threads.nodes=w.threads.nodes.reverse();var x={userName:(q=t)!=null?(q=q.me)!=null?q.name:q:q,userId:(r=t)!=null?(r=r.me)!=null?r.id:r:r,userProfilePic:(s=t)!=null?(s=s.me)!=null?s.profile_picture:s:s};return babelHelpers['extends']({},k,{data:c('LoadObject').withValue({userInfo:x,userBucketData:w,friendsBucketData:u})});case c('FBStoriesActionTypes').SUBSCRIPTION_BUCKET_UPDATE:{var m=function(){var aa=l.bucketData,ba=aa.id,ca=n.getFriendsBucketData(),da=ca.map(function(ea){if(ea.id==ba){return aa;}else return ea;});return {v:babelHelpers['extends']({},k,{data:c('LoadObject').withValue({userBucketData:n.getUserBucketData(),userInfo:n.getUserInfo(),friendsBucketData:da})})};}();if(typeof m==="object")return m.v;}case c('FBStoriesActionTypes').LOADED_ERROR:return babelHelpers['extends']({},k,{data:c('LoadObject').withError(new Error(l.error.errorSummary))});case c('FBStoriesActionTypes').SELECTED_BUCKET_ID_CHANGED:return this.$FBStoriesStore2(k,this.getBucketIds().indexOf(l.bucketID));case c('FBStoriesActionTypes').NEXT_BUCKET:return this.$FBStoriesStore2(k,k.selectedBucketIndex+1);case c('FBStoriesActionTypes').PREV_BUCKET:return this.$FBStoriesStore2(k,k.selectedBucketIndex-1);case c('FBStoriesActionTypes').SELECTED_THREAD_IDX_CHANGED:return babelHelpers['extends']({},k,{currentThreadIndex:l.index});case c('FBStoriesActionTypes').UPDATE_THREAD_SEEN_OPTIMISTIC:var y=this.getSelectedBucketId(),z=this.getFriendsBucketData().map(function(aa){if(aa.id==y){return babelHelpers['extends']({},aa,{threads:{nodes:this.$FBStoriesStore1(aa).map(function(ba){if(ba.id===l.threadID){return babelHelpers['extends']({},ba,{is_seen_by_viewer:true});}else return ba;})}});}else return aa;}.bind(this));return babelHelpers['extends']({},k,{data:c('LoadObject').withValue({userBucketData:this.getUserBucketData(),userInfo:this.getUserInfo(),friendsBucketData:z})});default:return k;}};j.prototype.$FBStoriesStore3=function(){var k=this.getState().data;return k.hasValue()?k.getValueEnforcing():{};};j.prototype.getUserBucketData=function(){return this.$FBStoriesStore3().userBucketData||{};};j.prototype.getUserInfo=function(){return this.$FBStoriesStore3().userInfo||{};};j.prototype.getFriendsBucketData=function(){return this.$FBStoriesStore3().friendsBucketData||[];};j.prototype.isLoading=function(){return this.getState().data.isLoading();};j.prototype.getBucketIds=function(){var k=this.getFriendsBucketData().map(function(m){return m.id;}),l=this.getUserBucketData().id;return [l].concat(k);};j.prototype.getSelectedBucketIndex=function(){return this.getState().selectedBucketIndex;};j.prototype.getSelectedBucketId=function(){return this.getBucketIds()[this.getSelectedBucketIndex()];};j.prototype.areAllDone=function(){return this.getState().allDone;};j.prototype.getSelectedBucketOwner=function(){var k;return ((k=this.$FBStoriesStore4())!=null?k.bucket_owner:k)||{};};j.prototype.getThreadsForSelectedBucket=function(){return this.$FBStoriesStore1(this.$FBStoriesStore4());};j.prototype.getCurrentThreadIndexForSelectedBucket=function(){return this.getState().currentThreadIndex;};j.prototype.getCurrentThreadIDForSelectedBucket=function(){return this.getThreadsForSelectedBucket()[this.getCurrentThreadIndexForSelectedBucket()].id;};j.prototype.shouldDisableReply=function(){var k,l=this.isOwnBucket(),m=((k=this.$FBStoriesStore4())!=null?(k=k.bucket_owner)!=null?k.is_viewer_friend:k:k)||false;return l||!m;};j.prototype.isOwnBucket=function(){return this.getSelectedBucketId()===this.getUserBucketData().id;};j.prototype.$FBStoriesStore2=function(k,l){var m=0,n=this.$FBStoriesStore5();if(l==0){var o=this.$FBStoriesStore1(this.getUserBucketData());if(o.length==0)l=-1;}if(l>0){var p=this.$FBStoriesStore6(l),q=this.$FBStoriesStore1(p);m=Math.max(0,q.findIndex(function(r){return !r.is_seen_by_viewer;}));}return babelHelpers['extends']({},k,{selectedBucketIndex:l,currentThreadIndex:m,allDone:l==n||l<0});};j.prototype.$FBStoriesStore4=function(){return this.$FBStoriesStore6(this.getSelectedBucketIndex());};j.prototype.$FBStoriesStore6=function(k){var l;return k===0?this.getUserBucketData():(l=this.getFriendsBucketData())!=null?l[k-1]:l;};j.prototype.$FBStoriesStore1=function(k){var l;return ((l=k)!=null?(l=l.threads)!=null?l.nodes:l:l)||[];};j.prototype.$FBStoriesStore5=function(){return this.getFriendsBucketData().length+1;};function j(){h.apply(this,arguments);}f.exports=new j(c('FBStoriesDispatcher'));}),null);
__d("FBStoriesTraySubscriptionWebGraphQLSubscription",["WebGraphQLSubscriptionHelper"],(function a(b,c,d,e,f,g){'use strict';f.exports=c("WebGraphQLSubscriptionHelper").getExports({docID:"1337037253011967",queryID:"1477476765607157"});}),null);
__d('FBStoriesTraySubscription',['BaseGraphQLSubscription','FBStoriesTraySubscriptionWebGraphQLSubscription','uuid'],(function a(b,c,d,e,f,g){var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function i(j){return 'gqls/stories_tray_subscribe/user_id_'+j;},_getQueryID:function i(){return c('FBStoriesTraySubscriptionWebGraphQLSubscription').getLegacyQueryID();},_getQueryParameters:function i(j){return {input:JSON.stringify({client_subscription_id:c('uuid')(),user_id:j})};},_getSubscriptionCallName:function i(){return 'stories_tray_subscribe';}});f.exports=h;}),null);
__d('FBStoriesAppController',['WebGraphQL','FBStoriesBucketsQueryWebGraphQLQuery','FBStoriesTraySubscription','FBStoriesDispatcher','FBStoriesActionTypes','idx','FBStoriesStore','CurrentUser'],(function a(b,c,d,e,f,g){'use strict';var h=c('FBStoriesDispatcher').dispatch;f.exports={init:function i(){c('FBStoriesDispatcher').explicitlyRegisterStores([c('FBStoriesStore')]);h({type:c('FBStoriesActionTypes').LOADING});c('WebGraphQL').exec(new (c('FBStoriesBucketsQueryWebGraphQLQuery'))()).done(function(j){return h({type:c('FBStoriesActionTypes').LOADED,data:j});},function(j){return h({type:c('FBStoriesActionTypes').LOADED_ERROR,error:j});});c('FBStoriesTraySubscription').subscribe(c('CurrentUser').getID(),function(j){var k;h({type:c('FBStoriesActionTypes').SUBSCRIPTION_BUCKET_UPDATE,bucketData:(k=j)!=null?(k=k.stories_tray_subscribe)!=null?k.bucket:k:k});});}};}),null);
__d('FBStoryTrayItem.react',['cx','Image.react','React'],(function a(b,c,d,e,f,g,h){'use strict';var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(){var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.$FBStoryTrayItem1=function(){if(this.props.onHover)this.props.onHover(this.props.bucketID);}.bind(this),this.$FBStoryTrayItem2=function(){if(this.props.onHoverOut)this.props.onHoverOut(this.props.bucketID);}.bind(this),this.$FBStoryTrayItem3=function(){if(this.props.onClick&&!this.props.disabled)this.props.onClick(this.props.bucketID);}.bind(this),m;}k.prototype.render=function(){if(!this.props.bucketID)return null;var l="_1fvv"+(this.props.highlighted?' '+"_1fw0":''),m=c('React').createElement('div',{className:l},c('React').createElement(c('Image.react'),{src:this.props.profilePhotoUrl,className:"_1fw2"})),n=c('React').createElement('div',{className:"_1fw3"},this.props.title);return c('React').createElement('div',{role:'button',tabIndex:0,onMouseEnter:this.$FBStoryTrayItem1,onMouseLeave:this.$FBStoryTrayItem2,onClick:this.$FBStoryTrayItem3,className:"_1fvw"+(this.props.disabled?' '+"_4lu8":'')},m,n);};f.exports=k;}),null);
__d('HorizontalScroll.react',['ix','cx','fbt','React','Link.react','Image.react','Animation','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m=250;k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;function n(o){l.constructor.call(this,o);this.$HorizontalScroll2=function(){var p=(this.state.visibleKidsCount-1)*this.props.childOffsetWidth,q=Math.max(0,this.$HorizontalScroll1.scrollLeft-p);this.setState({scrollLeft:q});}.bind(this);this.$HorizontalScroll3=function(){var p=(this.state.visibleKidsCount-1)*this.props.childOffsetWidth,q=this.state.scrollWidth-this.state.offsetWidth,r=Math.min(q,this.$HorizontalScroll1.scrollLeft+p);this.setState({scrollLeft:r});}.bind(this);this.state={scrollLeft:0,offsetWidth:0,scrollWidth:0,visibleKidsCount:0,visibleWidth:0};}n.prototype.componentDidMount=function(){var o=this.$HorizontalScroll1.offsetWidth,p=this.props.childOffsetWidth,q=o/p;this.setState({scrollLeft:this.$HorizontalScroll1.scrollLeft,offsetWidth:o,scrollWidth:this.$HorizontalScroll1.scrollWidth,visibleKidsCount:q,visibleWidth:p*q});};n.prototype.componentDidUpdate=function(o,p){if(p.scrollLeft!==this.state.scrollLeft)if(this.$HorizontalScroll1)new (c('Animation'))(this.$HorizontalScroll1).to('scrollLeft',this.state.scrollLeft).duration(m).go();};n.prototype.render=function(){var o=this.state.visibleWidth<this.state.offsetWidth,p=this.state.scrollLeft<=0||o,q=this.state.scrollLeft>=this.state.scrollWidth-this.state.offsetWidth||o;return c('React').createElement('div',{className:"_lmj",ref:function(r){return this.$HorizontalScroll1=r;}.bind(this)},c('React').createElement(c('Link.react'),{'aria-label':j._("See more results from the left"),className:(p?"hidden_elem":'')+(' '+"_lmk"),onClick:this.$HorizontalScroll2,role:'button'},c('React').createElement(c('Image.react'),{className:"_lml",src:h("141823")})),this.props.children,c('React').createElement(c('Link.react'),{'aria-label':j._("See more results from the right"),className:(q?"hidden_elem":'')+(' '+"_lmm"),onClick:this.$HorizontalScroll3,role:'button'},c('React').createElement(c('Image.react'),{className:"_lml",src:h("141833")})));};f.exports=n;}),null);
__d('FBStoriesTray.react',['fbt','React','idx','FBStoryTrayItem.react','HorizontalScroll.react'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k=61;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m,n,o=this.props,p=o.userData,q=o.friendsData,r=!q||q.length==0,s=((m=p)!=null?(m=m.threads)!=null?m.nodes:m:m)||[],t=!p||s.length==0;if(r&&t)return c('React').createElement('span',null,'No Stories Published');var u=(n=p)!=null?(n=n.bucket_owner)!=null?(n=n.profile_picture)!=null?n.uri:n:n:n,v=p.id,w=[!t?c('React').createElement(c('FBStoryTrayItem.react'),{disabled:t,highlighted:false,bucketID:v,key:v,profilePhotoUrl:u,title:h._("Va\u0161a pri\u010da"),onHover:this.props.onItemHover,onHoverOut:this.props.onItemHoverOut,onClick:this.props.onItemClick}):null].concat(this.$FBStoriesTray1());return c('React').createElement(c('HorizontalScroll.react'),{childOffsetWidth:k},w);};l.prototype.$FBStoriesTray1=function(){return this.props.friendsData.map(function(m,n){var o,p,q,r=m.id,s=(o=m)!=null?o.bucket_owner:o;if(!r||!s)return null;var t=s.id,u=s.short_name;if(!t||!u)return null;var v=(p=s)!=null?(p=p.profile_picture)!=null?p.uri:p:p,w=((q=m)!=null?(q=q.threads)!=null?q.nodes:q:q)||[],x=w.filter(function(y){return !y.is_seen_by_viewer;}).length>0;return c('React').createElement(c('FBStoryTrayItem.react'),{bucketID:r,title:u,profilePhotoUrl:v,highlighted:x,key:t,onHover:this.props.onItemHover,onHoverOut:this.props.onItemHoverOut,onClick:this.props.onItemClick});}.bind(this));};function l(){i.apply(this,arguments);}f.exports=l;}),null);
__d('FBStoriesActions',['FBStoriesDispatcher','FBStoriesActionTypes'],(function a(b,c,d,e,f,g){'use strict';var h=c('FBStoriesDispatcher').dispatch;f.exports={nextBucket:function i(){h({type:c('FBStoriesActionTypes').NEXT_BUCKET});},prevBucket:function i(){h({type:c('FBStoriesActionTypes').PREV_BUCKET});},selectedBucketIDChanged:function i(j){h({type:c('FBStoriesActionTypes').SELECTED_BUCKET_ID_CHANGED,bucketID:j});},currentThreadIndexChanged:function i(j){h({type:c('FBStoriesActionTypes').SELECTED_THREAD_IDX_CHANGED,index:j});},markThreadSeen:function i(j){h({type:c('FBStoriesActionTypes').UPDATE_THREAD_SEEN_OPTIMISTIC,threadID:j});}};}),null);
__d('FBStorySendReply.react',['ix','cx','fbt','React','Image.react','CameraPostSendReply.react','fbglyph'],(function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l;k=babelHelpers.inherits(m,c('React').PureComponent);l=k&&k.prototype;m.prototype.render=function(){var n=this.props.recipientPic;if(this.props.isSending)return c('React').createElement('div',{className:"_2dvt"+(' '+"_116w")},c('React').createElement('span',null,j._("Sending Direct...")),c('React').createElement(c('Image.react'),{className:"_d0d",src:h("124408")}),c('React').createElement(c('Image.react'),{src:n,className:"_116u"}));if(this.props.isError)return c('React').createElement('div',{className:"_2dvt"},c('React').createElement(c('Image.react'),{className:"_116-",src:h("132175")}),c('React').createElement('span',{className:"_116_"},j._("Unable to send Direct message")),c('React').createElement('a',{role:'link',tabIndex:0,className:"_1170",onClick:this.props.onErrorRetry},j._("\u017delite li poku\u0161ati ponovo?")));return this.props.children;};function m(){k.apply(this,arguments);}f.exports=m;}),null);
__d('SegmentedProgressBar.react',['cx','React','range'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k,l;i=babelHelpers.inherits(m,c('React').Component);j=i&&i.prototype;m.prototype.render=function(){var o=this.props,p=o.segmentCount,q=o.currentSegmentIndex,r=o.currentSegmentPercentComplete,s=o.currentSegmentDurationLeft,t=o.paused,u=c('range')(0,p).map(function(v){var w=0;if(v<q){w=100;}else if(v>q){w=0;}else w=r;return c('React').createElement(n,{key:v,current:v==q,paused:t,percentDone:w,durationLeft:s});});return c('React').createElement('div',{className:"_jxz"},u);};function m(){i.apply(this,arguments);}k=babelHelpers.inherits(n,c('React').Component);l=k&&k.prototype;n.prototype.render=function(){var o=this.props.percentDone,p={width:o+'%'};return c('React').createElement('div',{className:"_jx-"},c('React').createElement('div',{style:p,className:"_jx_"}));};function n(){k.apply(this,arguments);}f.exports=m;}),null);
__d('FBStoryContainer.react',['cx','fbt','React','idx','CurrentUser','CameraPostMedia.react','CameraPostOwnerView.react','CameraPostSendReply.react','CameraPostReportButton.react','CameraPostWWWTypedLogger','CameraPostLoggingEvents','SegmentedProgressBar.react','FBStoriesStore','FBStoriesActions','CameraPostGraphQLAPI','FBStorySendReply.react','FluxContainer'],(function a(b,c,d,e,f,g,h,i){'use strict';var j,k,l={PREV:'prev',NEXT:'next'},m=3500,n=.5,o='STORY',p='N/A';j=babelHelpers.inherits(q,c('React').Component);k=j&&j.prototype;function q(r){k.constructor.call(this,r);this.$FBStoryContainer16=function(){return this.$FBStoryContainer23(true);}.bind(this);this.$FBStoryContainer17=function(){if(!this.$FBStoryContainer6)this.$FBStoryContainer23(false);this.$FBStoryContainer6=false;}.bind(this);this.$FBStoryContainer18=function(){this.$FBStoryContainer6=true;return this.$FBStoryContainer23(true);}.bind(this);this.$FBStoryContainer19=function(){this.setState({isReplyError:false});}.bind(this);this.$FBStoryContainer14=function(){new (c('CameraPostWWWTypedLogger'))().setCameraPostType(o).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').AUTO_PROGRESSION).setEventDetails(this.state.bucketID).setViewerID(this.state.userInfo.userId).setThreadID(this.state.currentThreadIndex).log();this.$FBStoryContainer1();}.bind(this);this.$FBStoryContainer20=function(s){if(s!==''){var t=this.$FBStoryContainer8();if(!t)return;var u=t.threadID,v=this.state.userInfo.userId;this.$FBStoryContainer23(false);this.setState({isSendingReply:true,isReplyError:false,isPaused:true});c('CameraPostGraphQLAPI').sendDirectReply(v,u,s,o).done(function(){return this.setState({isSendingReply:false,isReplyError:false,isPaused:false});}.bind(this),function(w){return this.setState({isSendingReply:false,isReplyError:true,isPaused:true});}.bind(this));}}.bind(this);this.$FBStoryContainer21=function(s){this.$FBStoryContainer23(true);}.bind(this);this.$FBStoryContainer22=function(s){s.preventDefault();s.stopPropagation();if(!this.state.isSendingReply)this.$FBStoryContainer23(false);}.bind(this);this.$FBStoryContainer11=function(s,t){this.setState({currentThreadComplete:s,currentThreadDurationLeft:t});}.bind(this);this.$FBStoryContainer12=function(s){this.$FBStoryContainer2=setTimeout(function(){this.$FBStoryContainer2=undefined;this.$FBStoryContainer23(true);}.bind(this),500);}.bind(this);this.$FBStoryContainer13=function(s){if(s.target.tagName=='INPUT')return;if(this.$FBStoryContainer2){clearTimeout(this.$FBStoryContainer2);this.$FBStoryContainer2=undefined;}if(this.state.isPaused){this.$FBStoryContainer23(false);}else if(this.state.navDirectionOnClick==l.PREV){this.$FBStoryContainer24();}else this.$FBStoryContainer1();}.bind(this);this.$FBStoryContainer10=function(s){var t=s.currentTarget.offsetWidth,u=s.nativeEvent.offsetX,v=u/t<=n;this.setState({navDirectionOnClick:v?l.PREV:l.NEXT});}.bind(this);this.state={bucketID:null,currentThreadIndex:0,currentThreadComplete:0,currentThreadDurationLeft:m,threads:[],bucketOwner:{},userInfo:{userId:c('CurrentUser').getID(),userName:c('CurrentUser').getName()},isPaused:false,isReplyError:false,isSendingReply:false,allDone:false,isOwnBucket:false,shouldDisableReply:false,navDirectionOnClick:l.NEXT};}q.getStores=function(){return [c('FBStoriesStore')];};q.calculateState=function(r){var s={bucketID:c('FBStoriesStore').getSelectedBucketId(),currentThreadIndex:c('FBStoriesStore').getCurrentThreadIndexForSelectedBucket(),threads:c('FBStoriesStore').getThreadsForSelectedBucket(),bucketOwner:c('FBStoriesStore').getSelectedBucketOwner(),userInfo:c('FBStoriesStore').getUserInfo(),allDone:c('FBStoriesStore').areAllDone(),disableReply:c('FBStoriesStore').shouldDisableReply(),isOwnBucket:c('FBStoriesStore').isOwnBucket()};return s;};q.prototype.componentDidMount=function(){requestAnimationFrame(function(){return this.$FBStoryContainer1(this.state.currentThreadIndex);}.bind(this));this.$FBStoryContainer7(this.props,this.state);};q.prototype.componentWillUpdate=function(r,s){if(!this.state.allDone&&s.allDone)r.onDone();this.$FBStoryContainer7(r,s);};q.prototype.$FBStoryContainer7=function(r,s){var t=this.state;if(s===this.state)t={};if(t.bucketID!==s.bucketID)new (c('CameraPostWWWTypedLogger'))().setCameraPostType(o).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').BUCKET_CHANGED).setEventDetails(s.bucketID).setViewerID(s.userInfo.userId).setThreadID(s.currentThreadIndex).log();if(t.isPaused!==s.isPaused)new (c('CameraPostWWWTypedLogger'))().setCameraPostType(o).setWebSurface('www').setEventType(s.isPaused?c('CameraPostLoggingEvents').PAUSE_TOGGLE_ON:c('CameraPostLoggingEvents').PAUSE_TOGGLE_OFF).setEventDetails(s.bucketID).setViewerID(s.userInfo.userId).setThreadID(s.currentThreadIndex).log();};q.prototype.render=function(){var r=this.$FBStoryContainer8();if(!r)return null;var s=r.media,t=r.time,u=r.threadID,v=r.participants,w=r.bucketOwner,x=this.$FBStoryContainer9(s.__typename),y=this.state.userInfo,z=y.userId,aa=y.userName,ba=y.userProfilePic,ca="_4tkv"+(' '+"_24o3")+(this.state.isPaused?' '+"paused":'');return c('React').createElement('div',{tabIndex:0,ref:function(da){return this.$FBStoryContainer3=da;}.bind(this),className:ca,onMouseMove:this.$FBStoryContainer10},c('React').createElement('div',{className:"_24o4",key:u},c('React').createElement(c('CameraPostMedia.react'),{media:s,loop:false,paused:this.state.isPaused,onTimeUpdate:this.$FBStoryContainer11,onMouseDown:this.$FBStoryContainer12,onMouseUp:this.$FBStoryContainer13,onDone:this.$FBStoryContainer14}),c('React').createElement(c('CameraPostOwnerView.react'),{cameraPostType:o,participants:v,owner:w,time:t})),this.$FBStoryContainer15(l.PREV),this.$FBStoryContainer15(l.NEXT),c('React').createElement(c('SegmentedProgressBar.react'),{paused:this.state.isPaused,segmentCount:this.state.threads.length,currentSegmentIndex:this.state.currentThreadIndex,currentSegmentPercentComplete:this.state.currentThreadComplete,currentSegmentDurationLeft:this.state.currentThreadDurationLeft}),c('React').createElement(c('CameraPostReportButton.react'),{threadID:u,contentReportFbt:x,onPopoverShow:this.$FBStoryContainer16,onPopoverHide:this.$FBStoryContainer17,onPopoverItemClick:this.$FBStoryContainer18}),!this.state.disableReply?c('React').createElement(c('FBStorySendReply.react'),{recipientName:w.name,recipientPic:w.profile_picture.uri,isSending:this.state.isSendingReply,onErrorRetry:this.$FBStoryContainer19,isError:this.state.isReplyError},c('React').createElement(c('CameraPostSendReply.react'),{cameraPostType:o,replyProfileName:aa,replyProfilePic:ba,userID:z,threadID:u,onReplyEntered:this.$FBStoryContainer20,onFocusInput:this.$FBStoryContainer21,onBlurInput:this.$FBStoryContainer22})):null);};q.prototype.$FBStoryContainer15=function(r){return c('React').createElement('button',{className:"_24o5"+(r===l.NEXT?' '+"_24o8":'')+(r===l.PREV?' '+"_24o7":'')+(this.state.navDirectionOnClick==r?' '+"_24o6":''),onClick:function(s){s.preventDefault();s.stopPropagation();r===l.NEXT?this.$FBStoryContainer1():this.$FBStoryContainer24();}.bind(this),onMouseMove:function(s){s.stopPropagation();this.setState({navDirectionOnClick:r});}.bind(this)});};q.prototype.$FBStoryContainer1=function(r){if(this.state.threads.length==0)return;r=r!==undefined?r:this.state.currentThreadIndex+1;if(r<=this.state.threads.length-1){this.$FBStoryContainer25(r);}else c('FBStoriesActions').nextBucket();};q.prototype.$FBStoryContainer24=function(){if(this.state.threads.length==0)return;var r=this.state.currentThreadIndex-1;if(r>=0){this.$FBStoryContainer25(r);}else c('FBStoriesActions').prevBucket();};q.prototype.$FBStoryContainer25=function(r){var s=this.$FBStoryContainer8(r);if(!s)return;var t=this.state.userInfo.userId,u=s.threadID,v=s.latestMessageID,w=s.isSeen;this.setState({currentThreadComplete:0,currentThreadDurationLeft:s?s.duration:m,isReplyError:false,isPaused:false,isSendingReply:false});c('FBStoriesActions').currentThreadIndexChanged(r);if(!w){c('FBStoriesActions').markThreadSeen(u);c('CameraPostGraphQLAPI').markThreadSeen(t,u,v,o,p);}};q.prototype.$FBStoryContainer8=function(r){var s,t,u,v,w,x,y=this.state,z=y.currentThreadIndex,aa=y.bucketOwner;r=r!=undefined?r:z;var ba=this.state.threads[r];if(!ba)return null;var ca=((s=ba)!=null?(s=s.root_message)!=null?s.message_media:s:s)||{};return {media:ca,bucketOwner:aa,duration:((t=ca)!=null?t.playable_duration_in_ms:t)||m,participants:[],isSeen:(u=ba)!=null?u.is_seen_by_viewer:u,latestMessageID:(v=ba)!=null?(v=v.latest_message)!=null?v.id:v:v,time:((w=ba)!=null?w.time:w)||0,threadID:((x=ba)!=null?x.id:x)||''};};q.prototype.$FBStoryContainer23=function(r){this.setState({isPaused:r});};q.prototype.$FBStoryContainer9=function(r){if(this.state.isOwnBucket)return null;switch(r.toUpperCase()){case 'PHOTO':return i._("Report Photo");case 'VIDEO':return i._("Report Video");default:return i._("Report");}};q.prototype.componentWillUnmount=function(){if(this.$FBStoryContainer2){clearTimeout(this.$FBStoryContainer2);this.$FBStoryContainer2=undefined;}if(this.$FBStoryContainer4)this.$FBStoryContainer4.cancel();if(this.$FBStoryContainer5)this.$FBStoryContainer5.cancel();};f.exports=c('FluxContainer').create(q);}),null);
__d('FBStoriesTrayContainer.react',['cx','CSS','React','FBStoriesTray.react','FBStoryContainer.react','FBStoriesStore','FluxContainer','FBStoriesActions','SpotlightViewer','SpotlightViewerClose','CameraPostWWWTypedLogger','CameraPostLoggingEvents','idx','ge','CurrentUser'],(function a(b,c,d,e,f,g,h){'use strict';var i,j,k='STORY';i=babelHelpers.inherits(l,c('React').PureComponent);j=i&&i.prototype;function l(n){j.constructor.call(this,n);this.$FBStoriesTrayContainer2=function(o){new (c('CameraPostWWWTypedLogger'))().setCameraPostType(k).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').BUCKET_SELECTED_FROM_TRAY).setEventDetails(o).setViewerID(c('CurrentUser').getID()).setThreadID(this.state.currentThreadID).log();c('FBStoriesActions').selectedBucketIDChanged(o);this.setState({isViewerOpen:true});}.bind(this);this.$FBStoriesTrayContainer3=function(){new (c('CameraPostWWWTypedLogger'))().setCameraPostType(k).setWebSurface('www').setEventType(c('CameraPostLoggingEvents').STORIES_VIEWER_CLICKOUT).setEventDetails(0).setViewerID(c('CurrentUser').getID()).setThreadID(this.state.currentThreadID).log();this.setState({isViewerOpen:false});}.bind(this);this.state={friendsData:[],userData:{},loading:true,currentThreadID:'',isViewerOpen:false};}l.getStores=function(){return [c('FBStoriesStore')];};l.calculateState=function(n){return {userData:c('FBStoriesStore').getUserBucketData(),friendsData:c('FBStoriesStore').getFriendsBucketData(),loading:c('FBStoriesStore').isLoading(),currentThreadID:c('FBStoriesStore').getCurrentThreadIndexForSelectedBucket()};};l.prototype.componentDidUpdate=function(n,o){var p,q=o.loading&&!this.state.loading;if(q&&this.$FBStoriesTrayContainer1())(function(){var r=c('ge')('fb_stories_card_root');requestAnimationFrame(function(){c('CSS').addClass(r,'collapse');return;});})();};l.prototype.render=function(){if(this.state.loading)return c('React').createElement('div',{className:"_60kg"},c('React').createElement(m,null));if(this.$FBStoriesTrayContainer1())c('React').createElement('div',{className:"_60kg"});return c('React').createElement('div',{className:"_60kg"},c('React').createElement(c('FBStoriesTray.react'),{friendsData:this.state.friendsData,userData:this.state.userData,loading:this.state.loading,onItemClick:this.$FBStoriesTrayContainer2}),c('React').createElement(c('SpotlightViewer'),{open:this.state.isViewerOpen,onHide:this.$FBStoriesTrayContainer3},c('React').createElement(c('SpotlightViewerClose'),{isFixed:true,position:'right',onClick:this.$FBStoriesTrayContainer3}),c('React').createElement(c('FBStoryContainer.react'),{onDone:this.$FBStoriesTrayContainer3})));};l.prototype.$FBStoriesTrayContainer1=function(){var n,o=this.state,p=o.friendsData,q=o.userData,r=o.loading,s=((n=q)!=null?(n=n.threads)!=null?n.nodes:n:n)||[],t=!q||s.length==0,u=!p||p.length==0,v=t&&u;return !r&&v;};var m=function n(){var o=function p(){return c('React').createElement('div',{className:"_h0-"},c('React').createElement('div',{className:"_h14"}),c('React').createElement('div',{className:"_h15"}),c('React').createElement('div',{className:"_h16"}));};return c('React').createElement('div',{className:"_h1i"},c('React').createElement('div',{className:"_h1m"},o(),o(),o(),o(),o(),o(),o(),o()));};f.exports=c('FluxContainer').create(l);}),null);